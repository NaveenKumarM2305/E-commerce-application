{"ast":null,"code":"import { createCallout, loc } from '../../../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport '../../internals/BaseHeader.js';\nimport '../../internals/BaseFooter.js';\nimport BaseForm from '../../internals/BaseForm.js';\nimport BaseFormWithPolling from '../../internals/BaseFormWithPolling.js';\nimport '../../internals/BaseOktaVerifyChallengeView.js';\nimport '../../internals/BaseView.js';\nimport '../../components/AuthenticatorEnrollOptions.js';\nimport '../../components/AuthenticatorVerifyOptions.js';\nimport '../../../../../packages/@okta/courage-dist/esm/lib/underscore/underscore-min.js';\nimport 'cross-fetch';\nimport '../../../../util/BrowserFeatures.js';\nimport '../../../../util/FactorUtil.js';\nimport '../../../../v1/views/admin-consent/ScopeList.js';\nimport '../../../../v1/views/consent/ScopeList.js';\nimport '../captcha/CaptchaView.js';\nimport email from '../shared/email.js';\nimport BaseAuthenticatorView from '../../components/BaseAuthenticatorView.js';\nimport BaseResendView from '../shared/BaseResendView.js';\nconst ResendView = BaseResendView.extend({\n  className: 'hide resend-email-view',\n  events: {\n    'click a.resend-link': 'handelResendLink'\n  },\n  initialize: function () {\n    this.add(createCallout({\n      content: `${loc('email.code.not.received', 'login')}\n        <a class='resend-link'>${loc('email.button.resend', 'login')}</a>`,\n      type: 'warning'\n    }));\n  },\n  handelResendLink: function () {\n    this.options.appState.trigger('invokeAction', this.options.resendEmailAction);\n    // Hide warning, but reinitiate to show warning again after some threshold of polling\n    if (!this.$el.hasClass('hide')) {\n      this.$el.addClass('hide');\n    }\n    this.showCalloutAfterTimeout();\n  }\n});\nconst Body = BaseFormWithPolling.extend(Object.assign({\n  save: function () {\n    return loc('mfa.challenge.verify', 'login');\n  },\n  initialize: function () {\n    BaseFormWithPolling.prototype.initialize.apply(this, arguments);\n    this.startPolling();\n  },\n  postRender: function () {\n    BaseForm.prototype.postRender.apply(this, arguments);\n\n    // Add 1 instance of resend view\n    if (!this.$el.find('.resend-email-view').length) {\n      this.add(ResendView, {\n        selector: '.o-form-error-container',\n        prepend: true,\n        options: {\n          resendEmailAction: this.resendEmailAction\n        }\n      });\n    }\n  },\n  saveForm: function () {\n    BaseForm.prototype.saveForm.apply(this, arguments);\n    this.stopPolling();\n  },\n  remove: function () {\n    BaseForm.prototype.remove.apply(this, arguments);\n    this.stopPolling();\n  },\n  triggerAfterError: function (model, error) {\n    var _error$responseJSON, _error$responseJSON$e;\n    BaseForm.prototype.triggerAfterError.apply(this, arguments);\n    const isFormPolling = !!this.polling;\n    this.stopPolling();\n    if ((_error$responseJSON = error.responseJSON) !== null && _error$responseJSON !== void 0 && (_error$responseJSON$e = _error$responseJSON.errorSummaryKeys) !== null && _error$responseJSON$e !== void 0 && _error$responseJSON$e.includes('idx.session.expired')) {\n      // Do NOT resume polling since session is invalid and polling is already stopped\n      return;\n    }\n    if (this.isRateLimitError(error)) {\n      // When polling encounter rate limit error, wait 60 sec for rate limit bucket to reset\n      // before polling again & hide error message\n      if (isFormPolling) {\n        setTimeout(() => {\n          model.trigger('clearFormError');\n        }, 0);\n      }\n      this.startPolling(60000);\n    } else {\n      this.startPolling(this.options.appState.get('dynamicRefreshInterval'));\n    }\n  },\n  isRateLimitError: function (error) {\n    var _error$responseJSON2, _error$responseJSON2$, _error$responseJSON3, _error$responseJSON4;\n    return ((_error$responseJSON2 = error.responseJSON) === null || _error$responseJSON2 === void 0 ? void 0 : (_error$responseJSON2$ = _error$responseJSON2.errorSummaryKeys) === null || _error$responseJSON2$ === void 0 ? void 0 : _error$responseJSON2$.includes('tooManyRequests') // IDX API error\n    ) || ((_error$responseJSON3 = error.responseJSON) === null || _error$responseJSON3 === void 0 ? void 0 : _error$responseJSON3.errorCode) === 'E0000047' && !((_error$responseJSON4 = error.responseJSON) !== null && _error$responseJSON4 !== void 0 && _error$responseJSON4.errorIntent); // Standard API error\n  }\n}, email));\nvar BaseAuthenticatorEmailView = BaseAuthenticatorView.extend({\n  Body: Body\n});\nexport { BaseAuthenticatorEmailView as default };","map":{"version":3,"names":["createCallout","loc","BaseForm","BaseFormWithPolling","email","BaseAuthenticatorView","BaseResendView","ResendView","extend","className","events","initialize","add","content","type","handelResendLink","options","appState","trigger","resendEmailAction","$el","hasClass","addClass","showCalloutAfterTimeout","Body","Object","assign","save","prototype","apply","arguments","startPolling","postRender","find","length","selector","prepend","saveForm","stopPolling","remove","triggerAfterError","model","error","_error$responseJSON","_error$responseJSON$e","isFormPolling","polling","responseJSON","errorSummaryKeys","includes","isRateLimitError","setTimeout","get","_error$responseJSON2","_error$responseJSON2$","_error$responseJSON3","_error$responseJSON4","errorCode","errorIntent","BaseAuthenticatorEmailView","default"],"sources":["C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@okta/okta-signin-widget/dist/esm/src/v2/view-builder/views/email/BaseAuthenticatorEmailView.js"],"sourcesContent":["import { createCallout, loc } from '../../../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport '../../internals/BaseHeader.js';\nimport '../../internals/BaseFooter.js';\nimport BaseForm from '../../internals/BaseForm.js';\nimport BaseFormWithPolling from '../../internals/BaseFormWithPolling.js';\nimport '../../internals/BaseOktaVerifyChallengeView.js';\nimport '../../internals/BaseView.js';\nimport '../../components/AuthenticatorEnrollOptions.js';\nimport '../../components/AuthenticatorVerifyOptions.js';\nimport '../../../../../packages/@okta/courage-dist/esm/lib/underscore/underscore-min.js';\nimport 'cross-fetch';\nimport '../../../../util/BrowserFeatures.js';\nimport '../../../../util/FactorUtil.js';\nimport '../../../../v1/views/admin-consent/ScopeList.js';\nimport '../../../../v1/views/consent/ScopeList.js';\nimport '../captcha/CaptchaView.js';\nimport email from '../shared/email.js';\nimport BaseAuthenticatorView from '../../components/BaseAuthenticatorView.js';\nimport BaseResendView from '../shared/BaseResendView.js';\n\nconst ResendView = BaseResendView.extend({\n  className: 'hide resend-email-view',\n  events: {\n    'click a.resend-link': 'handelResendLink'\n  },\n  initialize: function () {\n    this.add(createCallout({\n      content: `${loc('email.code.not.received', 'login')}\n        <a class='resend-link'>${loc('email.button.resend', 'login')}</a>`,\n      type: 'warning'\n    }));\n  },\n  handelResendLink: function () {\n    this.options.appState.trigger('invokeAction', this.options.resendEmailAction);\n    // Hide warning, but reinitiate to show warning again after some threshold of polling\n    if (!this.$el.hasClass('hide')) {\n      this.$el.addClass('hide');\n    }\n    this.showCalloutAfterTimeout();\n  }\n});\nconst Body = BaseFormWithPolling.extend(Object.assign({\n  save: function () {\n    return loc('mfa.challenge.verify', 'login');\n  },\n  initialize: function () {\n    BaseFormWithPolling.prototype.initialize.apply(this, arguments);\n    this.startPolling();\n  },\n  postRender: function () {\n    BaseForm.prototype.postRender.apply(this, arguments);\n\n    // Add 1 instance of resend view\n    if (!this.$el.find('.resend-email-view').length) {\n      this.add(ResendView, {\n        selector: '.o-form-error-container',\n        prepend: true,\n        options: {\n          resendEmailAction: this.resendEmailAction\n        }\n      });\n    }\n  },\n  saveForm: function () {\n    BaseForm.prototype.saveForm.apply(this, arguments);\n    this.stopPolling();\n  },\n  remove: function () {\n    BaseForm.prototype.remove.apply(this, arguments);\n    this.stopPolling();\n  },\n  triggerAfterError: function (model, error) {\n    var _error$responseJSON, _error$responseJSON$e;\n    BaseForm.prototype.triggerAfterError.apply(this, arguments);\n    const isFormPolling = !!this.polling;\n    this.stopPolling();\n    if ((_error$responseJSON = error.responseJSON) !== null && _error$responseJSON !== void 0 && (_error$responseJSON$e = _error$responseJSON.errorSummaryKeys) !== null && _error$responseJSON$e !== void 0 && _error$responseJSON$e.includes('idx.session.expired')) {\n      // Do NOT resume polling since session is invalid and polling is already stopped\n      return;\n    }\n    if (this.isRateLimitError(error)) {\n      // When polling encounter rate limit error, wait 60 sec for rate limit bucket to reset\n      // before polling again & hide error message\n      if (isFormPolling) {\n        setTimeout(() => {\n          model.trigger('clearFormError');\n        }, 0);\n      }\n      this.startPolling(60000);\n    } else {\n      this.startPolling(this.options.appState.get('dynamicRefreshInterval'));\n    }\n  },\n  isRateLimitError: function (error) {\n    var _error$responseJSON2, _error$responseJSON2$, _error$responseJSON3, _error$responseJSON4;\n    return ((_error$responseJSON2 = error.responseJSON) === null || _error$responseJSON2 === void 0 ? void 0 : (_error$responseJSON2$ = _error$responseJSON2.errorSummaryKeys) === null || _error$responseJSON2$ === void 0 ? void 0 : _error$responseJSON2$.includes('tooManyRequests') // IDX API error\n    ) || ((_error$responseJSON3 = error.responseJSON) === null || _error$responseJSON3 === void 0 ? void 0 : _error$responseJSON3.errorCode) === 'E0000047' && !((_error$responseJSON4 = error.responseJSON) !== null && _error$responseJSON4 !== void 0 && _error$responseJSON4.errorIntent); // Standard API error\n  }\n}, email));\nvar BaseAuthenticatorEmailView = BaseAuthenticatorView.extend({\n  Body: Body\n});\n\nexport { BaseAuthenticatorEmailView as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}