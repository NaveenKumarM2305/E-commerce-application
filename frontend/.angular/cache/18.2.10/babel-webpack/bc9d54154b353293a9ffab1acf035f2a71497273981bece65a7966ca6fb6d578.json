{"ast":null,"code":"import { loc, createCallout } from '../../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport '../internals/BaseHeader.js';\nimport BaseFooter from '../internals/BaseFooter.js';\nimport BaseForm from '../internals/BaseForm.js';\nimport '../internals/BaseFormWithPolling.js';\nimport '../internals/BaseOktaVerifyChallengeView.js';\nimport BaseView from '../internals/BaseView.js';\nimport '../components/AuthenticatorEnrollOptions.js';\nimport '../components/AuthenticatorVerifyOptions.js';\nimport '../../../../packages/@okta/courage-dist/esm/lib/underscore/underscore-min.js';\nimport 'cross-fetch';\nimport '../../../util/BrowserFeatures.js';\nimport '../../../util/FactorUtil.js';\nimport '../../../v1/views/admin-consent/ScopeList.js';\nimport '../../../v1/views/consent/ScopeList.js';\nimport './captcha/CaptchaView.js';\nimport { getSkipSetupLink, getReloadPageButtonLink, getBackToSignInLink } from '../utils/LinksUtil.js';\nimport EmailAuthenticatorHeader from '../components/EmailAuthenticatorHeader.js';\nimport { OTPInformationTerminalView } from './consent/EmailMagicLinkOTPTerminalView.js';\nimport CustomAccessDeniedErrorMessage from './shared/CustomAccessDeniedErrorMessage.js';\nimport EndUserRemediationMessages from './end-user-remediation/EndUserRemediationMessages.js';\nconst RETURN_LINK_EXPIRED_KEY = 'idx.return.link.expired';\nconst IDX_RETURN_LINK_OTP_ONLY = 'idx.enter.otp.in.original.tab';\nconst SAFE_MODE_KEY_PREFIX = 'idx.error.server.safe.mode';\nconst UNLOCK_ACCOUNT_TERMINAL_KEY = 'oie.selfservice.unlock_user.success.message';\nconst UNLOCK_ACCOUNT_FAILED_PERMISSIONS = 'oie.selfservice.unlock_user.challenge.failed.permissions';\nconst RESET_PASSWORD_NOT_ALLOWED = 'oie.selfservice.reset.password.not.allowed';\nconst RETURN_TO_ORIGINAL_TAB_KEY = 'idx.return.to.original.tab';\nconst OPERATION_CANCELED_ON_OTHER_DEVICE_KEY = 'idx.operation.cancelled.on.other.device';\nconst OPERATION_CANCELED_BY_USER_KEY = 'idx.operation.cancelled.by.user';\nconst DEVICE_ACTIVATED = 'idx.device.activated';\nconst DEVICE_NOT_ACTIVATED_CONSENT_DENIED = 'idx.device.not.activated.consent.denied';\nconst DEVICE_NOT_ACTIVATED_INTERNAL_ERROR = 'idx.device.not.activated.internal.error';\nconst FLOW_CONTINUE_IN_NEW_TAB = 'idx.transferred.to.new.tab';\nconst EMAIL_LINK_OUT_OF_DATE = 'idx.return.stale';\nconst EMAIL_LINK_CANT_BE_PROCESSED = 'idx.return.error';\nconst EMAIL_VERIFICATION_REQUIRED = 'idx.email.verification.required';\nconst END_USER_REMEDIATION_KEY_PREFIX = 'idx.error.code.access_denied.device_assurance.remediation.';\nconst EMAIL_ACTIVATION_EMAIL_EXPIRE = 'idx.expired.activation.token';\nconst EMAIL_ACTIVATION_EMAIL_INVALID = 'idx.missing.activation.token';\nconst EMAIL_ACTIVATION_EMAIL_SUBMITTED = 'idx.request.activation.email';\nconst EMAIL_ACTIVATION_EMAIL_SUSPENDED = 'idx.activating.inactive.user';\nconst CUSTOM_ACCESS_DENIED_KEY = 'security.access_denied_custom_message';\nconst REGISTRATION_NOT_ENABLED = 'oie.registration.is.not.enabled';\nconst FORGOT_PASSWORD_NOT_ENABLED = 'oie.forgot.password.is.not.enabled';\nconst EMAIL_AUTHENTICATOR_TERMINAL_KEYS = [FLOW_CONTINUE_IN_NEW_TAB, EMAIL_LINK_OUT_OF_DATE, EMAIL_LINK_CANT_BE_PROCESSED, EMAIL_VERIFICATION_REQUIRED, RETURN_TO_ORIGINAL_TAB_KEY, RETURN_LINK_EXPIRED_KEY, OPERATION_CANCELED_ON_OTHER_DEVICE_KEY, OPERATION_CANCELED_BY_USER_KEY, IDX_RETURN_LINK_OTP_ONLY];\nconst DEVICE_CODE_ERROR_KEYS = [DEVICE_NOT_ACTIVATED_CONSENT_DENIED, DEVICE_NOT_ACTIVATED_INTERNAL_ERROR];\nconst DEVICE_CODE_FLOW_TERMINAL_KEYS = [DEVICE_ACTIVATED, ...DEVICE_CODE_ERROR_KEYS];\n\n// These terminal views build their own links, basically they have cancel remediation in error response\n// Or doesn't require a Back to Sign in link because the flow didn't start from login screen\nconst NO_BACKTOSIGNIN_LINK_VIEWS = [UNLOCK_ACCOUNT_TERMINAL_KEY, RETURN_TO_ORIGINAL_TAB_KEY, FLOW_CONTINUE_IN_NEW_TAB, OPERATION_CANCELED_ON_OTHER_DEVICE_KEY, ...DEVICE_CODE_FLOW_TERMINAL_KEYS, UNLOCK_ACCOUNT_FAILED_PERMISSIONS, RESET_PASSWORD_NOT_ALLOWED, IDX_RETURN_LINK_OTP_ONLY];\n\n// Key map to transform terminal view titles {ApiKey : WidgetKey}  \nconst terminalViewTitles = {\n  [RETURN_LINK_EXPIRED_KEY]: 'oie.email.return.link.expired.title',\n  [UNLOCK_ACCOUNT_TERMINAL_KEY]: 'account.unlock.unlocked.title',\n  [DEVICE_ACTIVATED]: 'device.code.activated.success.title',\n  [REGISTRATION_NOT_ENABLED]: 'oie.registration.form.title',\n  [FORGOT_PASSWORD_NOT_ENABLED]: 'password.reset.title.generic',\n  [EMAIL_ACTIVATION_EMAIL_EXPIRE]: 'oie.activation.request.email.title.expire',\n  [EMAIL_ACTIVATION_EMAIL_SUBMITTED]: 'oie.activation.request.email.title.submitted',\n  [EMAIL_ACTIVATION_EMAIL_SUSPENDED]: 'oie.activation.request.email.title.suspended',\n  [EMAIL_ACTIVATION_EMAIL_INVALID]: 'oie.activation.request.email.title.invalid',\n  [DEVICE_NOT_ACTIVATED_CONSENT_DENIED]: 'device.code.activated.error.title',\n  [DEVICE_NOT_ACTIVATED_INTERNAL_ERROR]: 'device.code.activated.error.title',\n  [RETURN_TO_ORIGINAL_TAB_KEY]: 'oie.consent.enduser.email.allow.title',\n  [IDX_RETURN_LINK_OTP_ONLY]: 'idx.return.link.otponly.your.verification.code'\n};\nconst Body = BaseForm.extend({\n  noButtonBar: true,\n  postRender: function () {\n    BaseForm.prototype.postRender.apply(this, arguments);\n    this.$el.addClass('terminal-state');\n\n    // show device code terminal icons\n    if (this.options.appState.containsMessageWithI18nKey(DEVICE_CODE_FLOW_TERMINAL_KEYS)) {\n      const iconClass = this.options.appState.containsMessageWithI18nKey(DEVICE_ACTIVATED) ? 'success-24-green' : 'error-24-red';\n      this.$('.o-form-head').before('<div class=\"device-code-terminal--icon-container\">' + '<span class=\"device-code-terminal--icon ' + iconClass + '\"></span>' + '</div>');\n    }\n  },\n  title: function () {\n    return this.getTerminalViewTitle();\n  },\n  getTerminalViewTitle: function () {\n    if (this.options.appState.containsMessageStartingWithI18nKey(SAFE_MODE_KEY_PREFIX)) {\n      return loc('oie.safe.mode.title', 'login');\n    }\n    const apiKeys = Object.keys(terminalViewTitles);\n    const key = apiKeys.find(key => this.options.appState.containsMessageWithI18nKey(key));\n    if (key) {\n      return loc(terminalViewTitles[key], 'login');\n    }\n  },\n  prepareMessageForCustomView: function (messagesObjs) {\n    let hasCustomView = false;\n    if (this.options.appState.containsMessageWithI18nKey(IDX_RETURN_LINK_OTP_ONLY)) {\n      this.add(OTPInformationTerminalView);\n      hasCustomView = true;\n    } else if (this.options.appState.containsMessageStartingWithI18nKey(CUSTOM_ACCESS_DENIED_KEY)) {\n      this.add(createCallout({\n        type: 'error',\n        content: new CustomAccessDeniedErrorMessage({\n          message: messagesObjs.value[0].message,\n          links: messagesObjs.value[0].links\n        })\n      }));\n      hasCustomView = true;\n    } else if (this.options.appState.containsMessageStartingWithI18nKey(END_USER_REMEDIATION_KEY_PREFIX)) {\n      this.add(createCallout({\n        type: 'error',\n        content: new EndUserRemediationMessages({\n          messages: messagesObjs.value\n        })\n      }));\n      hasCustomView = true;\n    }\n    return hasCustomView;\n  },\n  showMessages: function () {\n    const messagesObjs = this.options.appState.get('messages');\n    let hasCustomView = false;\n    let description;\n    if (this.options.appState.containsMessageWithI18nKey(OPERATION_CANCELED_ON_OTHER_DEVICE_KEY)) {\n      description = loc('idx.operation.cancelled.on.other.device', 'login');\n      messagesObjs.value.push({\n        message: loc('oie.consent.enduser.deny.description', 'login')\n      });\n    } else if (this.options.appState.containsMessageWithI18nKey(RETURN_TO_ORIGINAL_TAB_KEY)) {\n      description = loc('oie.consent.enduser.email.allow.description', 'login');\n      messagesObjs.value.push({\n        message: loc('oie.return.to.original.tab', 'login')\n      });\n    } else if (this.options.appState.containsMessageWithI18nKey('tooManyRequests')) {\n      description = loc('oie.tooManyRequests', 'login');\n    } else if (this.options.appState.containsMessageWithI18nKey(RETURN_LINK_EXPIRED_KEY)) {\n      messagesObjs.value[0].class = 'ERROR';\n    } else {\n      hasCustomView = this.prepareMessageForCustomView(messagesObjs);\n    }\n    if (description && Array.isArray(messagesObjs === null || messagesObjs === void 0 ? void 0 : messagesObjs.value)) {\n      messagesObjs.value[0].message = description;\n    }\n    this.options.appState.set('messages', messagesObjs);\n    if (!hasCustomView) {\n      BaseForm.prototype.showMessages.call(this);\n    }\n  }\n});\nconst Footer = BaseFooter.extend({\n  // All terminal views should have Back to sign in link either widget configured or server configured.\n  links: function () {\n    if (this.options.appState.containsMessageStartingWithI18nKey(SAFE_MODE_KEY_PREFIX)) {\n      return getSkipSetupLink(this.options.appState);\n    }\n    if (this.options.appState.containsMessageWithI18nKey(DEVICE_CODE_ERROR_KEYS)) {\n      return getReloadPageButtonLink();\n    }\n    // If cancel object exists idx response then view would take care of rendering back to sign in link\n    const shouldShowBackToSignInLink = !this.options.appState.hasActionObject('cancel') && !this.options.appState.containsMessageWithI18nKey(NO_BACKTOSIGNIN_LINK_VIEWS) && !this.options.settings.get('features.hideSignOutLinkInMFA') && !this.options.settings.get('features.mfaOnlyFlow');\n    if (shouldShowBackToSignInLink) {\n      // TODO OKTA-432869 \"back to sign in\" links to org baseUrl, does not work correctly with embedded widget\n      return getBackToSignInLink(this.options);\n    }\n  }\n});\nvar TerminalView = BaseView.extend({\n  initialize: function () {\n    BaseView.prototype.initialize.apply(this, arguments);\n    if (this.options.appState.containsMessageWithI18nKey(EMAIL_AUTHENTICATOR_TERMINAL_KEYS)) {\n      this.Header = EmailAuthenticatorHeader;\n    }\n  },\n  Body: Body,\n  Footer: Footer\n});\nexport { FORGOT_PASSWORD_NOT_ENABLED, REGISTRATION_NOT_ENABLED, TerminalView as default };","map":{"version":3,"names":["loc","createCallout","BaseFooter","BaseForm","BaseView","getSkipSetupLink","getReloadPageButtonLink","getBackToSignInLink","EmailAuthenticatorHeader","OTPInformationTerminalView","CustomAccessDeniedErrorMessage","EndUserRemediationMessages","RETURN_LINK_EXPIRED_KEY","IDX_RETURN_LINK_OTP_ONLY","SAFE_MODE_KEY_PREFIX","UNLOCK_ACCOUNT_TERMINAL_KEY","UNLOCK_ACCOUNT_FAILED_PERMISSIONS","RESET_PASSWORD_NOT_ALLOWED","RETURN_TO_ORIGINAL_TAB_KEY","OPERATION_CANCELED_ON_OTHER_DEVICE_KEY","OPERATION_CANCELED_BY_USER_KEY","DEVICE_ACTIVATED","DEVICE_NOT_ACTIVATED_CONSENT_DENIED","DEVICE_NOT_ACTIVATED_INTERNAL_ERROR","FLOW_CONTINUE_IN_NEW_TAB","EMAIL_LINK_OUT_OF_DATE","EMAIL_LINK_CANT_BE_PROCESSED","EMAIL_VERIFICATION_REQUIRED","END_USER_REMEDIATION_KEY_PREFIX","EMAIL_ACTIVATION_EMAIL_EXPIRE","EMAIL_ACTIVATION_EMAIL_INVALID","EMAIL_ACTIVATION_EMAIL_SUBMITTED","EMAIL_ACTIVATION_EMAIL_SUSPENDED","CUSTOM_ACCESS_DENIED_KEY","REGISTRATION_NOT_ENABLED","FORGOT_PASSWORD_NOT_ENABLED","EMAIL_AUTHENTICATOR_TERMINAL_KEYS","DEVICE_CODE_ERROR_KEYS","DEVICE_CODE_FLOW_TERMINAL_KEYS","NO_BACKTOSIGNIN_LINK_VIEWS","terminalViewTitles","Body","extend","noButtonBar","postRender","prototype","apply","arguments","$el","addClass","options","appState","containsMessageWithI18nKey","iconClass","$","before","title","getTerminalViewTitle","containsMessageStartingWithI18nKey","apiKeys","Object","keys","key","find","prepareMessageForCustomView","messagesObjs","hasCustomView","add","type","content","message","value","links","messages","showMessages","get","description","push","class","Array","isArray","set","call","Footer","shouldShowBackToSignInLink","hasActionObject","settings","TerminalView","initialize","Header","default"],"sources":["C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@okta/okta-signin-widget/dist/esm/src/v2/view-builder/views/TerminalView.js"],"sourcesContent":["import { loc, createCallout } from '../../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport '../internals/BaseHeader.js';\nimport BaseFooter from '../internals/BaseFooter.js';\nimport BaseForm from '../internals/BaseForm.js';\nimport '../internals/BaseFormWithPolling.js';\nimport '../internals/BaseOktaVerifyChallengeView.js';\nimport BaseView from '../internals/BaseView.js';\nimport '../components/AuthenticatorEnrollOptions.js';\nimport '../components/AuthenticatorVerifyOptions.js';\nimport '../../../../packages/@okta/courage-dist/esm/lib/underscore/underscore-min.js';\nimport 'cross-fetch';\nimport '../../../util/BrowserFeatures.js';\nimport '../../../util/FactorUtil.js';\nimport '../../../v1/views/admin-consent/ScopeList.js';\nimport '../../../v1/views/consent/ScopeList.js';\nimport './captcha/CaptchaView.js';\nimport { getSkipSetupLink, getReloadPageButtonLink, getBackToSignInLink } from '../utils/LinksUtil.js';\nimport EmailAuthenticatorHeader from '../components/EmailAuthenticatorHeader.js';\nimport { OTPInformationTerminalView } from './consent/EmailMagicLinkOTPTerminalView.js';\nimport CustomAccessDeniedErrorMessage from './shared/CustomAccessDeniedErrorMessage.js';\nimport EndUserRemediationMessages from './end-user-remediation/EndUserRemediationMessages.js';\n\nconst RETURN_LINK_EXPIRED_KEY = 'idx.return.link.expired';\nconst IDX_RETURN_LINK_OTP_ONLY = 'idx.enter.otp.in.original.tab';\nconst SAFE_MODE_KEY_PREFIX = 'idx.error.server.safe.mode';\nconst UNLOCK_ACCOUNT_TERMINAL_KEY = 'oie.selfservice.unlock_user.success.message';\nconst UNLOCK_ACCOUNT_FAILED_PERMISSIONS = 'oie.selfservice.unlock_user.challenge.failed.permissions';\nconst RESET_PASSWORD_NOT_ALLOWED = 'oie.selfservice.reset.password.not.allowed';\nconst RETURN_TO_ORIGINAL_TAB_KEY = 'idx.return.to.original.tab';\nconst OPERATION_CANCELED_ON_OTHER_DEVICE_KEY = 'idx.operation.cancelled.on.other.device';\nconst OPERATION_CANCELED_BY_USER_KEY = 'idx.operation.cancelled.by.user';\nconst DEVICE_ACTIVATED = 'idx.device.activated';\nconst DEVICE_NOT_ACTIVATED_CONSENT_DENIED = 'idx.device.not.activated.consent.denied';\nconst DEVICE_NOT_ACTIVATED_INTERNAL_ERROR = 'idx.device.not.activated.internal.error';\nconst FLOW_CONTINUE_IN_NEW_TAB = 'idx.transferred.to.new.tab';\nconst EMAIL_LINK_OUT_OF_DATE = 'idx.return.stale';\nconst EMAIL_LINK_CANT_BE_PROCESSED = 'idx.return.error';\nconst EMAIL_VERIFICATION_REQUIRED = 'idx.email.verification.required';\nconst END_USER_REMEDIATION_KEY_PREFIX = 'idx.error.code.access_denied.device_assurance.remediation.';\nconst EMAIL_ACTIVATION_EMAIL_EXPIRE = 'idx.expired.activation.token';\nconst EMAIL_ACTIVATION_EMAIL_INVALID = 'idx.missing.activation.token';\nconst EMAIL_ACTIVATION_EMAIL_SUBMITTED = 'idx.request.activation.email';\nconst EMAIL_ACTIVATION_EMAIL_SUSPENDED = 'idx.activating.inactive.user';\nconst CUSTOM_ACCESS_DENIED_KEY = 'security.access_denied_custom_message';\nconst REGISTRATION_NOT_ENABLED = 'oie.registration.is.not.enabled';\nconst FORGOT_PASSWORD_NOT_ENABLED = 'oie.forgot.password.is.not.enabled';\nconst EMAIL_AUTHENTICATOR_TERMINAL_KEYS = [FLOW_CONTINUE_IN_NEW_TAB, EMAIL_LINK_OUT_OF_DATE, EMAIL_LINK_CANT_BE_PROCESSED, EMAIL_VERIFICATION_REQUIRED, RETURN_TO_ORIGINAL_TAB_KEY, RETURN_LINK_EXPIRED_KEY, OPERATION_CANCELED_ON_OTHER_DEVICE_KEY, OPERATION_CANCELED_BY_USER_KEY, IDX_RETURN_LINK_OTP_ONLY];\nconst DEVICE_CODE_ERROR_KEYS = [DEVICE_NOT_ACTIVATED_CONSENT_DENIED, DEVICE_NOT_ACTIVATED_INTERNAL_ERROR];\nconst DEVICE_CODE_FLOW_TERMINAL_KEYS = [DEVICE_ACTIVATED, ...DEVICE_CODE_ERROR_KEYS];\n\n// These terminal views build their own links, basically they have cancel remediation in error response\n// Or doesn't require a Back to Sign in link because the flow didn't start from login screen\nconst NO_BACKTOSIGNIN_LINK_VIEWS = [UNLOCK_ACCOUNT_TERMINAL_KEY, RETURN_TO_ORIGINAL_TAB_KEY, FLOW_CONTINUE_IN_NEW_TAB, OPERATION_CANCELED_ON_OTHER_DEVICE_KEY, ...DEVICE_CODE_FLOW_TERMINAL_KEYS, UNLOCK_ACCOUNT_FAILED_PERMISSIONS, RESET_PASSWORD_NOT_ALLOWED, IDX_RETURN_LINK_OTP_ONLY];\n\n// Key map to transform terminal view titles {ApiKey : WidgetKey}  \nconst terminalViewTitles = {\n  [RETURN_LINK_EXPIRED_KEY]: 'oie.email.return.link.expired.title',\n  [UNLOCK_ACCOUNT_TERMINAL_KEY]: 'account.unlock.unlocked.title',\n  [DEVICE_ACTIVATED]: 'device.code.activated.success.title',\n  [REGISTRATION_NOT_ENABLED]: 'oie.registration.form.title',\n  [FORGOT_PASSWORD_NOT_ENABLED]: 'password.reset.title.generic',\n  [EMAIL_ACTIVATION_EMAIL_EXPIRE]: 'oie.activation.request.email.title.expire',\n  [EMAIL_ACTIVATION_EMAIL_SUBMITTED]: 'oie.activation.request.email.title.submitted',\n  [EMAIL_ACTIVATION_EMAIL_SUSPENDED]: 'oie.activation.request.email.title.suspended',\n  [EMAIL_ACTIVATION_EMAIL_INVALID]: 'oie.activation.request.email.title.invalid',\n  [DEVICE_NOT_ACTIVATED_CONSENT_DENIED]: 'device.code.activated.error.title',\n  [DEVICE_NOT_ACTIVATED_INTERNAL_ERROR]: 'device.code.activated.error.title',\n  [RETURN_TO_ORIGINAL_TAB_KEY]: 'oie.consent.enduser.email.allow.title',\n  [IDX_RETURN_LINK_OTP_ONLY]: 'idx.return.link.otponly.your.verification.code'\n};\nconst Body = BaseForm.extend({\n  noButtonBar: true,\n  postRender: function () {\n    BaseForm.prototype.postRender.apply(this, arguments);\n    this.$el.addClass('terminal-state');\n\n    // show device code terminal icons\n    if (this.options.appState.containsMessageWithI18nKey(DEVICE_CODE_FLOW_TERMINAL_KEYS)) {\n      const iconClass = this.options.appState.containsMessageWithI18nKey(DEVICE_ACTIVATED) ? 'success-24-green' : 'error-24-red';\n      this.$('.o-form-head').before('<div class=\"device-code-terminal--icon-container\">' + '<span class=\"device-code-terminal--icon ' + iconClass + '\"></span>' + '</div>');\n    }\n  },\n  title: function () {\n    return this.getTerminalViewTitle();\n  },\n  getTerminalViewTitle: function () {\n    if (this.options.appState.containsMessageStartingWithI18nKey(SAFE_MODE_KEY_PREFIX)) {\n      return loc('oie.safe.mode.title', 'login');\n    }\n    const apiKeys = Object.keys(terminalViewTitles);\n    const key = apiKeys.find(key => this.options.appState.containsMessageWithI18nKey(key));\n    if (key) {\n      return loc(terminalViewTitles[key], 'login');\n    }\n  },\n  prepareMessageForCustomView: function (messagesObjs) {\n    let hasCustomView = false;\n    if (this.options.appState.containsMessageWithI18nKey(IDX_RETURN_LINK_OTP_ONLY)) {\n      this.add(OTPInformationTerminalView);\n      hasCustomView = true;\n    } else if (this.options.appState.containsMessageStartingWithI18nKey(CUSTOM_ACCESS_DENIED_KEY)) {\n      this.add(createCallout({\n        type: 'error',\n        content: new CustomAccessDeniedErrorMessage({\n          message: messagesObjs.value[0].message,\n          links: messagesObjs.value[0].links\n        })\n      }));\n      hasCustomView = true;\n    } else if (this.options.appState.containsMessageStartingWithI18nKey(END_USER_REMEDIATION_KEY_PREFIX)) {\n      this.add(createCallout({\n        type: 'error',\n        content: new EndUserRemediationMessages({\n          messages: messagesObjs.value\n        })\n      }));\n      hasCustomView = true;\n    }\n    return hasCustomView;\n  },\n  showMessages: function () {\n    const messagesObjs = this.options.appState.get('messages');\n    let hasCustomView = false;\n    let description;\n    if (this.options.appState.containsMessageWithI18nKey(OPERATION_CANCELED_ON_OTHER_DEVICE_KEY)) {\n      description = loc('idx.operation.cancelled.on.other.device', 'login');\n      messagesObjs.value.push({\n        message: loc('oie.consent.enduser.deny.description', 'login')\n      });\n    } else if (this.options.appState.containsMessageWithI18nKey(RETURN_TO_ORIGINAL_TAB_KEY)) {\n      description = loc('oie.consent.enduser.email.allow.description', 'login');\n      messagesObjs.value.push({\n        message: loc('oie.return.to.original.tab', 'login')\n      });\n    } else if (this.options.appState.containsMessageWithI18nKey('tooManyRequests')) {\n      description = loc('oie.tooManyRequests', 'login');\n    } else if (this.options.appState.containsMessageWithI18nKey(RETURN_LINK_EXPIRED_KEY)) {\n      messagesObjs.value[0].class = 'ERROR';\n    } else {\n      hasCustomView = this.prepareMessageForCustomView(messagesObjs);\n    }\n    if (description && Array.isArray(messagesObjs === null || messagesObjs === void 0 ? void 0 : messagesObjs.value)) {\n      messagesObjs.value[0].message = description;\n    }\n    this.options.appState.set('messages', messagesObjs);\n    if (!hasCustomView) {\n      BaseForm.prototype.showMessages.call(this);\n    }\n  }\n});\nconst Footer = BaseFooter.extend({\n  // All terminal views should have Back to sign in link either widget configured or server configured.\n  links: function () {\n    if (this.options.appState.containsMessageStartingWithI18nKey(SAFE_MODE_KEY_PREFIX)) {\n      return getSkipSetupLink(this.options.appState);\n    }\n    if (this.options.appState.containsMessageWithI18nKey(DEVICE_CODE_ERROR_KEYS)) {\n      return getReloadPageButtonLink();\n    }\n    // If cancel object exists idx response then view would take care of rendering back to sign in link\n    const shouldShowBackToSignInLink = !this.options.appState.hasActionObject('cancel') && !this.options.appState.containsMessageWithI18nKey(NO_BACKTOSIGNIN_LINK_VIEWS) && !this.options.settings.get('features.hideSignOutLinkInMFA') && !this.options.settings.get('features.mfaOnlyFlow');\n    if (shouldShowBackToSignInLink) {\n      // TODO OKTA-432869 \"back to sign in\" links to org baseUrl, does not work correctly with embedded widget\n      return getBackToSignInLink(this.options);\n    }\n  }\n});\nvar TerminalView = BaseView.extend({\n  initialize: function () {\n    BaseView.prototype.initialize.apply(this, arguments);\n    if (this.options.appState.containsMessageWithI18nKey(EMAIL_AUTHENTICATOR_TERMINAL_KEYS)) {\n      this.Header = EmailAuthenticatorHeader;\n    }\n  },\n  Body: Body,\n  Footer: Footer\n});\n\nexport { FORGOT_PASSWORD_NOT_ENABLED, REGISTRATION_NOT_ENABLED, TerminalView as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}