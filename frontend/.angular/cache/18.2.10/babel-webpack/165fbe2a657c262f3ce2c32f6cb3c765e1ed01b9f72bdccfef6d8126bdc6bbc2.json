{"ast":null,"code":"import _asyncToGenerator from \"C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _Handlebars2 from '../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport { loc, View, internal } from '../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport oktaJQueryStatic from '../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport FormController from '../util/FormController.js';\nimport FormType from '../util/FormType.js';\nimport FooterWithBackLink from '../views/shared/FooterWithBackLink.js';\nlet {\n  Util: Util\n} = internal.util;\nvar VerifyPIVController = FormController.extend({\n  className: 'piv-cac-card',\n  Model: {\n    save: function () {\n      var _ref = _asyncToGenerator(function* () {\n        this.trigger('request');\n        const self = this;\n        const pivConfig = this.settings.get('piv');\n        const data = {\n          fromURI: this.settings.get('relayState'),\n          isCustomDomain: pivConfig.isCustomDomain,\n          customDomain: pivConfig.customDomain\n        };\n        try {\n          yield this.getCert(pivConfig.certAuthUrl);\n          const res = yield this.postCert(pivConfig.certAuthUrl, data);\n          Util.redirect(res.redirectUrl);\n        } catch (err) {\n          if (oktaUnderscore.isEmpty(err.responseJSON) && !err.responseText) {\n            err.responseJSON = {\n              errorSummary: loc('piv.cac.error', 'login')\n            };\n          }\n          self.trigger('error', self, err);\n        }\n      });\n      return function save() {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    getCert: function (certAuthUrl) {\n      return oktaJQueryStatic.get({\n        url: certAuthUrl,\n        xhrFields: {\n          withCredentials: true\n        },\n        beforeSend: function () {\n          // overriding this function to prevent our jquery-wrapper from\n          // setting headers. Need to keep this a simple request in order for\n          // PIV / CAC to work in IE.\n        }\n      });\n    },\n    postCert: function (certAuthUrl, data) {\n      return oktaJQueryStatic.post({\n        url: certAuthUrl,\n        xhrFields: {\n          withCredentials: true\n        },\n        data: JSON.stringify(data),\n        contentType: 'text/plain',\n        beforeSend: function () {\n          // overriding this function to prevent our jquery-wrapper from\n          // setting headers. Need to keep this a simple request in order for\n          // PIV / CAC to work in IE.\n        }\n      });\n    }\n  },\n  Form: {\n    autoSave: true,\n    hasSavingState: false,\n    title: oktaUnderscore.partial(loc, 'piv.cac.title', 'login'),\n    className: 'piv-cac-card',\n    noCancelButton: true,\n    save: oktaUnderscore.partial(loc, 'retry', 'login'),\n    modelEvents: {\n      request: '_startEnrollment',\n      error: '_stopEnrollment'\n    },\n    formChildren: [FormType.View({\n      View: View.extend({\n        template: _Handlebars2.template({\n          \"compiler\": [8, \">= 4.3.0\"],\n          \"main\": function (container, depth0, helpers, partials, data) {\n            var lookupProperty = container.lookupProperty || function (parent, propertyName) {\n              if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                return parent[propertyName];\n              }\n              return undefined;\n            };\n            return \"<div class=\\\"piv-verify-text\\\"><p>\" + container.escapeExpression((lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(depth0 != null ? depth0 : container.nullContext || {}, {\n              \"name\": \"i18n\",\n              \"hash\": {\n                \"bundle\": \"login\",\n                \"code\": \"piv.cac.card.insert\"\n              },\n              \"data\": data,\n              \"loc\": {\n                \"start\": {\n                  \"line\": 1,\n                  \"column\": 32\n                },\n                \"end\": {\n                  \"line\": 1,\n                  \"column\": 82\n                }\n              }\n            })) + \"</p><div data-se=\\\"piv-waiting\\\" class=\\\"okta-waiting-spinner\\\"></div></div>\";\n          },\n          \"useData\": true\n        })\n      })\n    })],\n    _startEnrollment: function () {\n      this.$('.okta-waiting-spinner').show();\n      this.$('.o-form-button-bar').hide();\n    },\n    _stopEnrollment: function () {\n      this.$('.okta-waiting-spinner').hide();\n      this.$('.o-form-button-bar').show();\n    },\n    postRender: function () {\n      oktaUnderscore.defer(() => {\n        this.model.save();\n      });\n    }\n  },\n  back: function () {\n    // Empty function on verify controllers to prevent users\n    // from navigating back during 'verify' using the browser's\n    // back button. The URL will still change, but the view will not\n    // More details in OKTA-135060.\n  },\n  Footer: FooterWithBackLink\n});\nexport { VerifyPIVController as default };","map":{"version":3,"names":["_Handlebars2","loc","View","internal","oktaJQueryStatic","oktaUnderscore","FormController","FormType","FooterWithBackLink","Util","util","VerifyPIVController","extend","className","Model","save","_ref","_asyncToGenerator","trigger","self","pivConfig","settings","get","data","fromURI","isCustomDomain","customDomain","getCert","certAuthUrl","res","postCert","redirect","redirectUrl","err","isEmpty","responseJSON","responseText","errorSummary","apply","arguments","url","xhrFields","withCredentials","beforeSend","post","JSON","stringify","contentType","Form","autoSave","hasSavingState","title","partial","noCancelButton","modelEvents","request","error","formChildren","template","main","container","depth0","helpers","partials","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","escapeExpression","hooks","helperMissing","nullContext","_startEnrollment","$","show","hide","_stopEnrollment","postRender","defer","model","back","Footer","default"],"sources":["C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@okta/okta-signin-widget/dist/esm/src/v1/controllers/VerifyPIVController.js"],"sourcesContent":["import _Handlebars2 from '../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport { loc, View, internal } from '../../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport oktaJQueryStatic from '../../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport FormController from '../util/FormController.js';\nimport FormType from '../util/FormType.js';\nimport FooterWithBackLink from '../views/shared/FooterWithBackLink.js';\n\nlet {\n  Util: Util\n} = internal.util;\nvar VerifyPIVController = FormController.extend({\n  className: 'piv-cac-card',\n  Model: {\n    save: async function () {\n      this.trigger('request');\n      const self = this;\n      const pivConfig = this.settings.get('piv');\n      const data = {\n        fromURI: this.settings.get('relayState'),\n        isCustomDomain: pivConfig.isCustomDomain,\n        customDomain: pivConfig.customDomain\n      };\n      try {\n        await this.getCert(pivConfig.certAuthUrl);\n        const res = await this.postCert(pivConfig.certAuthUrl, data);\n        Util.redirect(res.redirectUrl);\n      } catch (err) {\n        if (oktaUnderscore.isEmpty(err.responseJSON) && !err.responseText) {\n          err.responseJSON = {\n            errorSummary: loc('piv.cac.error', 'login')\n          };\n        }\n        self.trigger('error', self, err);\n      }\n    },\n    getCert: function (certAuthUrl) {\n      return oktaJQueryStatic.get({\n        url: certAuthUrl,\n        xhrFields: {\n          withCredentials: true\n        },\n        beforeSend: function () {\n          // overriding this function to prevent our jquery-wrapper from\n          // setting headers. Need to keep this a simple request in order for\n          // PIV / CAC to work in IE.\n        }\n      });\n    },\n    postCert: function (certAuthUrl, data) {\n      return oktaJQueryStatic.post({\n        url: certAuthUrl,\n        xhrFields: {\n          withCredentials: true\n        },\n        data: JSON.stringify(data),\n        contentType: 'text/plain',\n        beforeSend: function () {\n          // overriding this function to prevent our jquery-wrapper from\n          // setting headers. Need to keep this a simple request in order for\n          // PIV / CAC to work in IE.\n        }\n      });\n    }\n  },\n  Form: {\n    autoSave: true,\n    hasSavingState: false,\n    title: oktaUnderscore.partial(loc, 'piv.cac.title', 'login'),\n    className: 'piv-cac-card',\n    noCancelButton: true,\n    save: oktaUnderscore.partial(loc, 'retry', 'login'),\n    modelEvents: {\n      request: '_startEnrollment',\n      error: '_stopEnrollment'\n    },\n    formChildren: [FormType.View({\n      View: View.extend({\n        template: _Handlebars2.template({\n          \"compiler\": [8, \">= 4.3.0\"],\n          \"main\": function (container, depth0, helpers, partials, data) {\n            var lookupProperty = container.lookupProperty || function (parent, propertyName) {\n              if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n                return parent[propertyName];\n              }\n              return undefined;\n            };\n            return \"<div class=\\\"piv-verify-text\\\"><p>\" + container.escapeExpression((lookupProperty(helpers, \"i18n\") || depth0 && lookupProperty(depth0, \"i18n\") || container.hooks.helperMissing).call(depth0 != null ? depth0 : container.nullContext || {}, {\n              \"name\": \"i18n\",\n              \"hash\": {\n                \"bundle\": \"login\",\n                \"code\": \"piv.cac.card.insert\"\n              },\n              \"data\": data,\n              \"loc\": {\n                \"start\": {\n                  \"line\": 1,\n                  \"column\": 32\n                },\n                \"end\": {\n                  \"line\": 1,\n                  \"column\": 82\n                }\n              }\n            })) + \"</p><div data-se=\\\"piv-waiting\\\" class=\\\"okta-waiting-spinner\\\"></div></div>\";\n          },\n          \"useData\": true\n        })\n      })\n    })],\n    _startEnrollment: function () {\n      this.$('.okta-waiting-spinner').show();\n      this.$('.o-form-button-bar').hide();\n    },\n    _stopEnrollment: function () {\n      this.$('.okta-waiting-spinner').hide();\n      this.$('.o-form-button-bar').show();\n    },\n    postRender: function () {\n      oktaUnderscore.defer(() => {\n        this.model.save();\n      });\n    }\n  },\n  back: function () {\n    // Empty function on verify controllers to prevent users\n    // from navigating back during 'verify' using the browser's\n    // back button. The URL will still change, but the view will not\n    // More details in OKTA-135060.\n  },\n  Footer: FooterWithBackLink\n});\n\nexport { VerifyPIVController as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}