{"ast":null,"code":"import { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class CartService {\n  decrementQuantity(theCartItem) {\n    theCartItem.quantity--;\n    if (theCartItem.quantity == 0) {\n      this.remove(theCartItem);\n    } else {\n      this.computeCartTotals();\n    }\n  }\n  remove(theCartItem) {\n    const itemIndex = this.cartItems.findIndex(tempCartItem => tempCartItem.id == theCartItem.id);\n    if (itemIndex > -1) {\n      this.cartItems.splice(itemIndex, 1);\n      this.computeCartTotals();\n    }\n  }\n  constructor() {\n    this.cartItems = [];\n    this.totalPrice = new Subject();\n    this.totalQuantity = new Subject();\n  }\n  addToCart(theCartItem) {\n    console.log(\"Adding to cart:\", theCartItem); // Debug log\n    let alreadyExistsInCart = false;\n    let existingCartItem = undefined;\n    if (this.cartItems.length > 0) {\n      existingCartItem = this.cartItems.find(temCartItem => temCartItem.id == theCartItem.id);\n      alreadyExistsInCart = existingCartItem !== undefined;\n    }\n    if (alreadyExistsInCart) {\n      existingCartItem.quantity++;\n    } else {\n      this.cartItems.push(theCartItem);\n      console.log(\"New item added to cart:\", theCartItem); // Debug log\n    }\n    // Call computeCartTotals after modifying the cartItems array\n    this.computeCartTotals();\n  }\n  computeCartTotals() {\n    let totalPriceValue = 0;\n    let totalQuantityValue = 0;\n    for (let currentCartItem of this.cartItems) {\n      totalPriceValue += currentCartItem.quantity * currentCartItem.unitPrice;\n      totalQuantityValue += currentCartItem.quantity;\n    }\n    this.totalPrice.next(totalPriceValue);\n    this.totalQuantity.next(totalQuantityValue);\n    this.logCartData(totalPriceValue, totalQuantityValue);\n  }\n  logCartData(totalPriceValue, totalQuantityValue) {\n    console.log(\"Contents of the cart:\", this.cartItems); // Debug log for cartItems\n    console.log(`Total Price: ${totalPriceValue}, Total Quantity: ${totalQuantityValue}`);\n    console.log(\"Cart items length:\", this.cartItems.length); // Check the length of cartItems\n    for (let tempCartItem of this.cartItems) {\n      const subTotalPrice = tempCartItem.quantity * tempCartItem.unitPrice;\n      console.log(`Item ID: ${tempCartItem.id}, Quantity: ${tempCartItem.quantity}, Unit Price: ${tempCartItem.unitPrice}, SubTotal: ${subTotalPrice}`);\n    }\n    console.log(`Total Price (fixed): ${totalPriceValue.toFixed(2)}`);\n  }\n  static {\n    this.ɵfac = function CartService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CartService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: CartService,\n      factory: CartService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["Subject","CartService","decrementQuantity","theCartItem","quantity","remove","computeCartTotals","itemIndex","cartItems","findIndex","tempCartItem","id","splice","constructor","totalPrice","totalQuantity","addToCart","console","log","alreadyExistsInCart","existingCartItem","undefined","length","find","temCartItem","push","totalPriceValue","totalQuantityValue","currentCartItem","unitPrice","next","logCartData","subTotalPrice","toFixed","factory","ɵfac","providedIn"],"sources":["C:\\SpringBOot\\ecommerce-project\\03-frontend\\angular-ecommerce\\src\\app\\services\\cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { CartItem } from '../common/cart-item';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService {\n  decrementQuantity(theCartItem: CartItem) {\n    theCartItem.quantity--;\n    if(theCartItem.quantity==0){\n      this.remove(theCartItem);\n    }\n    else{\n      this.computeCartTotals();\n    }\n  }\n  remove(theCartItem: CartItem) {\n    const itemIndex=this.cartItems.findIndex(tempCartItem=>tempCartItem.id==theCartItem.id);\n    if(itemIndex>-1){\n      this.cartItems.splice(itemIndex,1);\n      this.computeCartTotals();\n    }\n  }\n  cartItems: CartItem[] = [];\n  totalPrice: Subject<number> = new Subject<number>();\n  totalQuantity: Subject<number> = new Subject<number>();\n\n  constructor() { }\n\n  addToCart(theCartItem: CartItem) {\n    console.log(\"Adding to cart:\", theCartItem); // Debug log\n    let alreadyExistsInCart: boolean = false;\n    let existingCartItem: CartItem | undefined = undefined;\n\n    if (this.cartItems.length > 0) {\n      existingCartItem = this.cartItems.find(temCartItem => temCartItem.id == theCartItem.id); \n      alreadyExistsInCart = (existingCartItem !== undefined);\n    }\n\n    if (alreadyExistsInCart) {\n      existingCartItem!.quantity++;\n    } else {\n      this.cartItems.push(theCartItem);\n      console.log(\"New item added to cart:\", theCartItem); // Debug log\n    }\n\n    // Call computeCartTotals after modifying the cartItems array\n    this.computeCartTotals();\n  }\n\n  computeCartTotals() {\n    let totalPriceValue: number = 0;\n    let totalQuantityValue: number = 0;\n\n    for (let currentCartItem of this.cartItems) {\n      totalPriceValue += currentCartItem.quantity * currentCartItem.unitPrice;\n      totalQuantityValue += currentCartItem.quantity;\n    }\n\n    this.totalPrice.next(totalPriceValue);\n    this.totalQuantity.next(totalQuantityValue);\n    this.logCartData(totalPriceValue, totalQuantityValue);\n  }\n\n  logCartData(totalPriceValue: number, totalQuantityValue: number) {\n    console.log(\"Contents of the cart:\", this.cartItems); // Debug log for cartItems\n\n    console.log(`Total Price: ${totalPriceValue}, Total Quantity: ${totalQuantityValue}`);\n    console.log(\"Cart items length:\", this.cartItems.length); // Check the length of cartItems\n\n    for (let tempCartItem of this.cartItems) {\n      const subTotalPrice = tempCartItem.quantity * tempCartItem.unitPrice;\n      console.log(`Item ID: ${tempCartItem.id}, Quantity: ${tempCartItem.quantity}, Unit Price: ${tempCartItem.unitPrice}, SubTotal: ${subTotalPrice}`);\n    }\n    console.log(`Total Price (fixed): ${totalPriceValue.toFixed(2)}`);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}