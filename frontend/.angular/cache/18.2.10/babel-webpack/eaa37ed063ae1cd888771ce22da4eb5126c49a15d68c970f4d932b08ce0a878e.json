{"ast":null,"code":"import _asyncToGenerator from \"C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { parseOAuthResponseFromUrl } from '../oidc/parseFromUrl.js';\nimport { AuthStateManager } from './AuthStateManager.js';\nimport { ServiceManager } from './ServiceManager/browser.js';\nfunction mixinCore(Base) {\n  return class OktaAuthCore extends Base {\n    constructor(...args) {\n      super(...args);\n      this.authStateManager = new AuthStateManager(this);\n      this.serviceManager = new ServiceManager(this, this.options.services);\n    }\n    start() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.serviceManager.start();\n        _this.tokenManager.start();\n        if (!_this.token.isLoginRedirect()) {\n          yield _this.authStateManager.updateAuthState();\n        }\n      })();\n    }\n    stop() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        _this2.tokenManager.stop();\n        yield _this2.serviceManager.stop();\n      })();\n    }\n    handleRedirect(originalUri) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        yield _this3.handleLoginRedirect(undefined, originalUri);\n      })();\n    }\n    handleLoginRedirect(tokens, originalUri) {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        let state = _this4.options.state;\n        if (tokens) {\n          _this4.tokenManager.setTokens(tokens);\n          originalUri = originalUri || _this4.getOriginalUri(_this4.options.state);\n        } else if (_this4.isLoginRedirect()) {\n          try {\n            const oAuthResponse = yield parseOAuthResponseFromUrl(_this4, {});\n            state = oAuthResponse.state;\n            originalUri = originalUri || _this4.getOriginalUri(state);\n            yield _this4.storeTokensFromRedirect();\n          } catch (e) {\n            yield _this4.authStateManager.updateAuthState();\n            throw e;\n          }\n        } else {\n          return;\n        }\n        yield _this4.authStateManager.updateAuthState();\n        _this4.removeOriginalUri(state);\n        const {\n          restoreOriginalUri\n        } = _this4.options;\n        if (restoreOriginalUri) {\n          yield restoreOriginalUri(_this4, originalUri);\n        } else if (originalUri) {\n          window.location.replace(originalUri);\n        }\n      })();\n    }\n  };\n}\nexport { mixinCore };","map":{"version":3,"names":["parseOAuthResponseFromUrl","AuthStateManager","ServiceManager","mixinCore","Base","OktaAuthCore","constructor","args","authStateManager","serviceManager","options","services","start","_this","_asyncToGenerator","tokenManager","token","isLoginRedirect","updateAuthState","stop","_this2","handleRedirect","originalUri","_this3","handleLoginRedirect","undefined","tokens","_this4","state","setTokens","getOriginalUri","oAuthResponse","storeTokensFromRedirect","e","removeOriginalUri","restoreOriginalUri","window","location","replace"],"sources":["C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/core/mixin.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { parseOAuthResponseFromUrl } from '../oidc/parseFromUrl.js';\nimport { AuthStateManager } from './AuthStateManager.js';\nimport { ServiceManager } from './ServiceManager/browser.js';\n\nfunction mixinCore(Base) {\n    return class OktaAuthCore extends Base {\n        constructor(...args) {\n            super(...args);\n            this.authStateManager = new AuthStateManager(this);\n            this.serviceManager = new ServiceManager(this, this.options.services);\n        }\n        async start() {\n            await this.serviceManager.start();\n            this.tokenManager.start();\n            if (!this.token.isLoginRedirect()) {\n                await this.authStateManager.updateAuthState();\n            }\n        }\n        async stop() {\n            this.tokenManager.stop();\n            await this.serviceManager.stop();\n        }\n        async handleRedirect(originalUri) {\n            await this.handleLoginRedirect(undefined, originalUri);\n        }\n        async handleLoginRedirect(tokens, originalUri) {\n            let state = this.options.state;\n            if (tokens) {\n                this.tokenManager.setTokens(tokens);\n                originalUri = originalUri || this.getOriginalUri(this.options.state);\n            }\n            else if (this.isLoginRedirect()) {\n                try {\n                    const oAuthResponse = await parseOAuthResponseFromUrl(this, {});\n                    state = oAuthResponse.state;\n                    originalUri = originalUri || this.getOriginalUri(state);\n                    await this.storeTokensFromRedirect();\n                }\n                catch (e) {\n                    await this.authStateManager.updateAuthState();\n                    throw e;\n                }\n            }\n            else {\n                return;\n            }\n            await this.authStateManager.updateAuthState();\n            this.removeOriginalUri(state);\n            const { restoreOriginalUri } = this.options;\n            if (restoreOriginalUri) {\n                await restoreOriginalUri(this, originalUri);\n            }\n            else if (originalUri) {\n                window.location.replace(originalUri);\n            }\n        }\n    };\n}\n\nexport { mixinCore };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}