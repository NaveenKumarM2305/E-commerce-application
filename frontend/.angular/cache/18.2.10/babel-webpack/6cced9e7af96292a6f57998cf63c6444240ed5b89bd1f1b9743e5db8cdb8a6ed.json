{"ast":null,"code":"import { Router, loc } from '../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport Backbone from '../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport oktaJQueryStatic from '../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport AppState from './models/AppState.js';\nimport Settings from '../models/Settings.js';\nimport Bundles from '../util/Bundles.js';\nimport Logger from '../util/Logger.js';\nimport AuthContainer from './views/shared/AuthContainer.js';\nimport Header from './views/shared/Header.js';\nimport SecurityBeacon from './views/shared/SecurityBeacon.js';\nimport fn$2 from '../util/Animations.js';\nimport fn$3 from '../util/BrowserFeatures.js';\nimport fn$1 from '../util/ColorsUtil.js';\nimport Enums from '../util/Enums.js';\nimport { ConfigError } from '../util/Errors.js';\nimport fn from './util/RouterUtil.js';\nimport Util from '../util/Util.js';\nimport LanguageUtil from '../util/LanguageUtil.js';\n\n/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nfunction isStateLessRouteHandler(router, fn) {\n  return oktaUnderscore.find(router.stateLessRouteHandlers, function (routeName) {\n    return fn === router[routeName];\n  });\n}\nfunction beaconIsAvailable(Beacon, settings) {\n  if (!Beacon) {\n    return false;\n  }\n  if (Beacon === SecurityBeacon) {\n    return settings.get('features.securityImage');\n  }\n  return true;\n}\nvar BaseLoginRouter = Router.extend({\n  Events: Backbone.Events,\n  initialize: function (options) {\n    // Create a default success and/or error handler if\n    // one is not provided.\n    if (!options.globalSuccessFn) {\n      options.globalSuccessFn = function () {};\n    }\n    if (!options.globalErrorFn) {\n      options.globalErrorFn = function (err) {\n        Logger.error(err);\n      };\n    }\n    this.settings = new Settings(oktaUnderscore.omit(options, 'el'), {\n      parse: true\n    });\n    if (!options.el) {\n      this.settings.callGlobalError(new ConfigError(loc('error.required.el')));\n    }\n    oktaJQueryStatic('body > div').on('click', function () {\n      // OKTA-69769 Tooltip wont close on iPhone/iPad\n      // Registering a click handler on the first div\n      // allows a tap that falls outside the tooltip\n      // to be registered as a tap by iOS\n      // and then the open tooltip will lose focus and close.\n    });\n    this.appState = new AppState({\n      baseUrl: this.settings.get('baseUrl'),\n      settings: this.settings\n    }, {\n      parse: true\n    });\n    const wrapper = new AuthContainer({\n      appState: this.appState\n    });\n    oktaJQueryStatic(options.el).append(wrapper.render().$el);\n    this.el = `#${Enums.WIDGET_CONTAINER_ID}`;\n    this.header = new Header({\n      el: this.el,\n      appState: this.appState,\n      settings: this.settings\n    });\n\n    // Hide until unitial render\n    this.hide();\n    this.listenTo(this.appState, 'change:transactionError', function (appState, err) {\n      fn.routeAfterAuthStatusChangeError(this, err);\n    });\n    this.listenTo(this.appState, 'change:transaction', function (appState, trans) {\n      fn.routeAfterAuthStatusChange(this, trans.data);\n    });\n    this.listenTo(this.appState, 'navigate', function (url) {\n      this.navigate(url, {\n        trigger: true\n      });\n    });\n  },\n  execute: function (cb, args) {\n    const recoveryToken = this.settings.get('recoveryToken');\n    // Recovery flow with a token passed through widget settings\n\n    if (recoveryToken) {\n      this.settings.unset('recoveryToken');\n      this.navigate(fn.createRecoveryUrl(recoveryToken), {\n        trigger: true\n      });\n      return;\n    }\n\n    // Refresh flow with a stateToken passed through widget settings\n    const stateToken = this.settings.get('stateToken');\n    if (stateToken) {\n      this.settings.unset('stateToken');\n      this.navigate(fn.createRefreshUrl(stateToken), {\n        trigger: true\n      });\n      return;\n    }\n\n    // Normal flow - we've either navigated to a stateless page, or are\n    // in the middle of an auth flow\n    const trans = this.appState.get('transaction');\n    if (trans && trans.data || isStateLessRouteHandler(this, cb)) {\n      cb.apply(this, args);\n      return;\n    }\n\n    // StateToken cookie exists on page load, and we are on a stateful url\n    if (this.settings.getAuthClient().tx.exists()) {\n      this.navigate(fn.createRefreshUrl(), {\n        trigger: true\n      });\n      return;\n    }\n\n    // We've hit a page that requires state, but have no stateToken - redirect\n    // back to primary auth\n    this.navigate('', {\n      trigger: true\n    });\n  },\n  // Overriding the default navigate method to allow the widget consumer\n  // to \"turn off\" routing - if features.router is false, the browser\n  // location bar will not update when the router navigates\n  navigate: function (fragment, options) {\n    if (this.settings.get('features.router')) {\n      return Router.prototype.navigate.apply(this, arguments);\n    }\n    if (options && options.trigger) {\n      return Backbone.history.loadUrl(fragment);\n    }\n  },\n  render: function (Controller, options) {\n    options || (options = {});\n    let Beacon = options.Beacon;\n    const controllerOptions = oktaUnderscore.extend({\n      settings: this.settings,\n      appState: this.appState\n    }, oktaUnderscore.omit(options, 'Beacon'));\n\n    // Since we have a wrapper view, render our wrapper and use its content\n    // element as our new el.\n    // Note: Render it here because we know dom is ready at this point\n    if (!this.header.rendered()) {\n      this.el = this.header.render().getContentEl();\n    }\n\n    // If we need to load a language (or apply custom i18n overrides), do\n    // this now and re-run render after it's finished.\n    if (!Bundles.isLoaded(this.appState.get('languageCode'))) {\n      return LanguageUtil.loadLanguage(this.appState, this.settings).then(oktaUnderscore.bind(this.render, this, Controller, options));\n    }\n\n    // Load the custom colors only on the first render\n    if (this.settings.get('colors.brand') && !fn$1.isLoaded()) {\n      const colors = {\n        brand: this.settings.get('colors.brand')\n      };\n      const cspNonce = this.settings.get('cspNonce');\n      fn$1.addStyle(colors, cspNonce);\n    }\n    const oldController = this.controller;\n    this.controller = new Controller(controllerOptions);\n\n    // Bubble up all controller events\n    this.listenTo(this.controller, 'all', this.trigger);\n\n    // First run fetchInitialData, in case the next controller needs data\n    // before it's initial render. This will leave the current page in a\n    // loading state.\n    return this.controller.fetchInitialData().then(() => {\n      // Beacon transition occurs in parallel to page swap\n      if (!beaconIsAvailable(Beacon, this.settings)) {\n        Beacon = null;\n      }\n      this.header.setBeacon(Beacon, controllerOptions);\n\n      // Show before initial render\n      this.show();\n      this.controller.render();\n      if (!oldController) {\n        this.el.append(this.controller.el);\n        this.controller.postRenderAnimation();\n        return;\n      }\n      return fn$2.swapPages({\n        $parent: this.el,\n        $oldRoot: oldController.$el,\n        $newRoot: this.controller.$el,\n        dir: oldController.state.get('navigateDir'),\n        ctx: this,\n        success: function () {\n          const flashError = this.appState.get('flashError');\n          const model = this.controller.model;\n          oldController.remove();\n          oldController.$el.remove();\n          this.controller.postRenderAnimation();\n          if (flashError) {\n            let errorSummary;\n            const isTerminalError = flashError.is && flashError.is('terminal');\n            if (isTerminalError) {\n              errorSummary = flashError.errorDetails.errorSummary;\n            } else {\n              errorSummary = loc(this.settings.get('features.mfaOnlyFlow') ? 'error.mfa.only.expired.session' : 'error.expired.session');\n            }\n            model.trigger('error', model, {\n              responseJSON: {\n                errorSummary: errorSummary\n              }\n            });\n            this.appState.unset('flashError');\n            Util.triggerAfterError(this.controller, flashError);\n          }\n        }\n      });\n    }).catch(function () {\n      // OKTA-69665 - if an error occurs in fetchInitialData, we're left in\n      // a state with two active controllers. Therefore, we clean up the\n      // old one. Note: This explicitly handles the invalid token case -\n      // if we get some other type of error which doesn't force a redirect,\n      // we will probably be left in a bad state. I.e. old controller is\n      // dropped and new controller is not rendered.\n      if (oldController) {\n        oldController.remove();\n        oldController.$el.remove();\n      }\n    });\n  },\n  start: function () {\n    let pushState = false;\n\n    // Support for browser's back button.\n    if (window.addEventListener && this.settings.get('features.router')) {\n      window.addEventListener('popstate', e => {\n        if (this.controller.back) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n          this.controller.back();\n        }\n      });\n      pushState = fn$3.supportsPushState();\n    }\n    Router.prototype.start.call(this, {\n      pushState: pushState\n    });\n  },\n  hide: function () {\n    this.header.$el.hide();\n  },\n  show: function () {\n    this.header.$el.show();\n  },\n  remove: function () {\n    if (this.controller) {\n      this.controller.remove();\n    }\n    this.header.$el.remove();\n    Bundles.remove();\n    Backbone.history.stop();\n  }\n});\nexport { BaseLoginRouter as default };","map":{"version":3,"names":["Router","loc","Backbone","oktaJQueryStatic","oktaUnderscore","AppState","Settings","Bundles","Logger","AuthContainer","Header","SecurityBeacon","fn$2","fn$3","fn$1","Enums","ConfigError","fn","Util","LanguageUtil","isStateLessRouteHandler","router","find","stateLessRouteHandlers","routeName","beaconIsAvailable","Beacon","settings","get","BaseLoginRouter","extend","Events","initialize","options","globalSuccessFn","globalErrorFn","err","error","omit","parse","el","callGlobalError","on","appState","baseUrl","wrapper","append","render","$el","WIDGET_CONTAINER_ID","header","hide","listenTo","routeAfterAuthStatusChangeError","trans","routeAfterAuthStatusChange","data","url","navigate","trigger","execute","cb","args","recoveryToken","unset","createRecoveryUrl","stateToken","createRefreshUrl","apply","getAuthClient","tx","exists","fragment","prototype","arguments","history","loadUrl","Controller","controllerOptions","rendered","getContentEl","isLoaded","loadLanguage","then","bind","colors","brand","cspNonce","addStyle","oldController","controller","fetchInitialData","setBeacon","show","postRenderAnimation","swapPages","$parent","$oldRoot","$newRoot","dir","state","ctx","success","flashError","model","remove","errorSummary","isTerminalError","is","errorDetails","responseJSON","triggerAfterError","catch","start","pushState","window","addEventListener","e","back","preventDefault","stopImmediatePropagation","supportsPushState","call","stop","default"],"sources":["C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@okta/okta-signin-widget/dist/esm/src/v1/BaseLoginRouter.js"],"sourcesContent":["import { Router, loc } from '../../packages/@okta/courage-dist/esm/src/CourageForSigninWidget.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/framework/Model.js';\nimport Backbone from '../../packages/@okta/courage-dist/esm/src/courage/vendor/lib/backbone.js';\nimport oktaJQueryStatic from '../../packages/@okta/courage-dist/esm/src/courage/util/jquery-wrapper.js';\nimport oktaUnderscore from '../../packages/@okta/courage-dist/esm/src/courage/util/underscore-wrapper.js';\nimport '../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/models/Model.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/models/BaseModel.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/framework/View.js';\nimport '../../packages/@okta/courage-dist/esm/src/courage/views/Backbone.ListView.js';\nimport AppState from './models/AppState.js';\nimport Settings from '../models/Settings.js';\nimport Bundles from '../util/Bundles.js';\nimport Logger from '../util/Logger.js';\nimport AuthContainer from './views/shared/AuthContainer.js';\nimport Header from './views/shared/Header.js';\nimport SecurityBeacon from './views/shared/SecurityBeacon.js';\nimport fn$2 from '../util/Animations.js';\nimport fn$3 from '../util/BrowserFeatures.js';\nimport fn$1 from '../util/ColorsUtil.js';\nimport Enums from '../util/Enums.js';\nimport { ConfigError } from '../util/Errors.js';\nimport fn from './util/RouterUtil.js';\nimport Util from '../util/Util.js';\nimport LanguageUtil from '../util/LanguageUtil.js';\n\n/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nfunction isStateLessRouteHandler(router, fn) {\n  return oktaUnderscore.find(router.stateLessRouteHandlers, function (routeName) {\n    return fn === router[routeName];\n  });\n}\nfunction beaconIsAvailable(Beacon, settings) {\n  if (!Beacon) {\n    return false;\n  }\n  if (Beacon === SecurityBeacon) {\n    return settings.get('features.securityImage');\n  }\n  return true;\n}\nvar BaseLoginRouter = Router.extend({\n  Events: Backbone.Events,\n  initialize: function (options) {\n    // Create a default success and/or error handler if\n    // one is not provided.\n    if (!options.globalSuccessFn) {\n      options.globalSuccessFn = function () {};\n    }\n    if (!options.globalErrorFn) {\n      options.globalErrorFn = function (err) {\n        Logger.error(err);\n      };\n    }\n    this.settings = new Settings(oktaUnderscore.omit(options, 'el'), {\n      parse: true\n    });\n    if (!options.el) {\n      this.settings.callGlobalError(new ConfigError(loc('error.required.el')));\n    }\n    oktaJQueryStatic('body > div').on('click', function () {\n      // OKTA-69769 Tooltip wont close on iPhone/iPad\n      // Registering a click handler on the first div\n      // allows a tap that falls outside the tooltip\n      // to be registered as a tap by iOS\n      // and then the open tooltip will lose focus and close.\n    });\n    this.appState = new AppState({\n      baseUrl: this.settings.get('baseUrl'),\n      settings: this.settings\n    }, {\n      parse: true\n    });\n    const wrapper = new AuthContainer({\n      appState: this.appState\n    });\n    oktaJQueryStatic(options.el).append(wrapper.render().$el);\n    this.el = `#${Enums.WIDGET_CONTAINER_ID}`;\n    this.header = new Header({\n      el: this.el,\n      appState: this.appState,\n      settings: this.settings\n    });\n\n    // Hide until unitial render\n    this.hide();\n    this.listenTo(this.appState, 'change:transactionError', function (appState, err) {\n      fn.routeAfterAuthStatusChangeError(this, err);\n    });\n    this.listenTo(this.appState, 'change:transaction', function (appState, trans) {\n      fn.routeAfterAuthStatusChange(this, trans.data);\n    });\n    this.listenTo(this.appState, 'navigate', function (url) {\n      this.navigate(url, {\n        trigger: true\n      });\n    });\n  },\n  execute: function (cb, args) {\n    const recoveryToken = this.settings.get('recoveryToken');\n    // Recovery flow with a token passed through widget settings\n\n    if (recoveryToken) {\n      this.settings.unset('recoveryToken');\n      this.navigate(fn.createRecoveryUrl(recoveryToken), {\n        trigger: true\n      });\n      return;\n    }\n\n    // Refresh flow with a stateToken passed through widget settings\n    const stateToken = this.settings.get('stateToken');\n    if (stateToken) {\n      this.settings.unset('stateToken');\n      this.navigate(fn.createRefreshUrl(stateToken), {\n        trigger: true\n      });\n      return;\n    }\n\n    // Normal flow - we've either navigated to a stateless page, or are\n    // in the middle of an auth flow\n    const trans = this.appState.get('transaction');\n    if (trans && trans.data || isStateLessRouteHandler(this, cb)) {\n      cb.apply(this, args);\n      return;\n    }\n\n    // StateToken cookie exists on page load, and we are on a stateful url\n    if (this.settings.getAuthClient().tx.exists()) {\n      this.navigate(fn.createRefreshUrl(), {\n        trigger: true\n      });\n      return;\n    }\n\n    // We've hit a page that requires state, but have no stateToken - redirect\n    // back to primary auth\n    this.navigate('', {\n      trigger: true\n    });\n  },\n  // Overriding the default navigate method to allow the widget consumer\n  // to \"turn off\" routing - if features.router is false, the browser\n  // location bar will not update when the router navigates\n  navigate: function (fragment, options) {\n    if (this.settings.get('features.router')) {\n      return Router.prototype.navigate.apply(this, arguments);\n    }\n    if (options && options.trigger) {\n      return Backbone.history.loadUrl(fragment);\n    }\n  },\n  render: function (Controller, options) {\n    options || (options = {});\n    let Beacon = options.Beacon;\n    const controllerOptions = oktaUnderscore.extend({\n      settings: this.settings,\n      appState: this.appState\n    }, oktaUnderscore.omit(options, 'Beacon'));\n\n    // Since we have a wrapper view, render our wrapper and use its content\n    // element as our new el.\n    // Note: Render it here because we know dom is ready at this point\n    if (!this.header.rendered()) {\n      this.el = this.header.render().getContentEl();\n    }\n\n    // If we need to load a language (or apply custom i18n overrides), do\n    // this now and re-run render after it's finished.\n    if (!Bundles.isLoaded(this.appState.get('languageCode'))) {\n      return LanguageUtil.loadLanguage(this.appState, this.settings).then(oktaUnderscore.bind(this.render, this, Controller, options));\n    }\n\n    // Load the custom colors only on the first render\n    if (this.settings.get('colors.brand') && !fn$1.isLoaded()) {\n      const colors = {\n        brand: this.settings.get('colors.brand')\n      };\n      const cspNonce = this.settings.get('cspNonce');\n      fn$1.addStyle(colors, cspNonce);\n    }\n    const oldController = this.controller;\n    this.controller = new Controller(controllerOptions);\n\n    // Bubble up all controller events\n    this.listenTo(this.controller, 'all', this.trigger);\n\n    // First run fetchInitialData, in case the next controller needs data\n    // before it's initial render. This will leave the current page in a\n    // loading state.\n    return this.controller.fetchInitialData().then(() => {\n      // Beacon transition occurs in parallel to page swap\n      if (!beaconIsAvailable(Beacon, this.settings)) {\n        Beacon = null;\n      }\n      this.header.setBeacon(Beacon, controllerOptions);\n\n      // Show before initial render\n      this.show();\n      this.controller.render();\n      if (!oldController) {\n        this.el.append(this.controller.el);\n        this.controller.postRenderAnimation();\n        return;\n      }\n      return fn$2.swapPages({\n        $parent: this.el,\n        $oldRoot: oldController.$el,\n        $newRoot: this.controller.$el,\n        dir: oldController.state.get('navigateDir'),\n        ctx: this,\n        success: function () {\n          const flashError = this.appState.get('flashError');\n          const model = this.controller.model;\n          oldController.remove();\n          oldController.$el.remove();\n          this.controller.postRenderAnimation();\n          if (flashError) {\n            let errorSummary;\n            const isTerminalError = flashError.is && flashError.is('terminal');\n            if (isTerminalError) {\n              errorSummary = flashError.errorDetails.errorSummary;\n            } else {\n              errorSummary = loc(this.settings.get('features.mfaOnlyFlow') ? 'error.mfa.only.expired.session' : 'error.expired.session');\n            }\n            model.trigger('error', model, {\n              responseJSON: {\n                errorSummary: errorSummary\n              }\n            });\n            this.appState.unset('flashError');\n            Util.triggerAfterError(this.controller, flashError);\n          }\n        }\n      });\n    }).catch(function () {\n      // OKTA-69665 - if an error occurs in fetchInitialData, we're left in\n      // a state with two active controllers. Therefore, we clean up the\n      // old one. Note: This explicitly handles the invalid token case -\n      // if we get some other type of error which doesn't force a redirect,\n      // we will probably be left in a bad state. I.e. old controller is\n      // dropped and new controller is not rendered.\n      if (oldController) {\n        oldController.remove();\n        oldController.$el.remove();\n      }\n    });\n  },\n  start: function () {\n    let pushState = false;\n\n    // Support for browser's back button.\n    if (window.addEventListener && this.settings.get('features.router')) {\n      window.addEventListener('popstate', e => {\n        if (this.controller.back) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n          this.controller.back();\n        }\n      });\n      pushState = fn$3.supportsPushState();\n    }\n    Router.prototype.start.call(this, {\n      pushState: pushState\n    });\n  },\n  hide: function () {\n    this.header.$el.hide();\n  },\n  show: function () {\n    this.header.$el.show();\n  },\n  remove: function () {\n    if (this.controller) {\n      this.controller.remove();\n    }\n    this.header.$el.remove();\n    Bundles.remove();\n    Backbone.history.stop();\n  }\n});\n\nexport { BaseLoginRouter as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}