{"ast":null,"code":"import _asyncToGenerator from \"C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthApiError from '../errors/AuthApiError.js';\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport OAuthError from '../errors/OAuthError.js';\nimport WWWAuthError from '../errors/WWWAuthError.js';\nimport { httpRequest } from '../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\nimport { isAccessToken, isIDToken } from './types/Token.js';\nfunction getUserInfo(_x, _x2, _x3) {\n  return _getUserInfo.apply(this, arguments);\n}\nfunction _getUserInfo() {\n  _getUserInfo = _asyncToGenerator(function* (sdk, accessTokenObject, idTokenObject) {\n    if (!accessTokenObject) {\n      accessTokenObject = (yield sdk.tokenManager.getTokens()).accessToken;\n    }\n    if (!idTokenObject) {\n      idTokenObject = (yield sdk.tokenManager.getTokens()).idToken;\n    }\n    if (!accessTokenObject || !isAccessToken(accessTokenObject)) {\n      return Promise.reject(new AuthSdkError('getUserInfo requires an access token object'));\n    }\n    if (!idTokenObject || !isIDToken(idTokenObject)) {\n      return Promise.reject(new AuthSdkError('getUserInfo requires an ID token object'));\n    }\n    const options = {\n      url: accessTokenObject.userinfoUrl,\n      method: 'GET',\n      accessToken: accessTokenObject.accessToken\n    };\n    if (sdk.options.dpop) {\n      const headers = yield sdk.getDPoPAuthorizationHeaders(Object.assign(Object.assign({}, options), {\n        accessToken: accessTokenObject\n      }));\n      options.headers = headers;\n      delete options.accessToken;\n    }\n    return httpRequest(sdk, options).then(userInfo => {\n      if (userInfo.sub === idTokenObject.claims.sub) {\n        return userInfo;\n      }\n      return Promise.reject(new AuthSdkError('getUserInfo request was rejected due to token mismatch'));\n    }).catch(function (err) {\n      var _a;\n      if (err instanceof WWWAuthError && !sdk.options.dpop) {\n        const {\n          error,\n          errorDescription\n        } = err;\n        throw new OAuthError(error, errorDescription);\n      }\n      if (!sdk.options.dpop) {\n        let e = err;\n        if (err instanceof AuthApiError && ((_a = err === null || err === void 0 ? void 0 : err.meta) === null || _a === void 0 ? void 0 : _a.wwwAuthHeader)) {\n          e = WWWAuthError.parseHeader(err.meta.wwwAuthHeader);\n        }\n        if (e instanceof WWWAuthError) {\n          const {\n            error,\n            errorDescription\n          } = e;\n          throw new OAuthError(error, errorDescription);\n        }\n      }\n      throw err;\n    });\n  });\n  return _getUserInfo.apply(this, arguments);\n}\nexport { getUserInfo };","map":{"version":3,"names":["AuthApiError","AuthSdkError","OAuthError","WWWAuthError","httpRequest","isAccessToken","isIDToken","getUserInfo","_x","_x2","_x3","_getUserInfo","apply","arguments","_asyncToGenerator","sdk","accessTokenObject","idTokenObject","tokenManager","getTokens","accessToken","idToken","Promise","reject","options","url","userinfoUrl","method","dpop","headers","getDPoPAuthorizationHeaders","Object","assign","then","userInfo","sub","claims","catch","err","_a","error","errorDescription","e","meta","wwwAuthHeader","parseHeader"],"sources":["C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/oidc/getUserInfo.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthApiError from '../errors/AuthApiError.js';\nimport AuthSdkError from '../errors/AuthSdkError.js';\nimport OAuthError from '../errors/OAuthError.js';\nimport WWWAuthError from '../errors/WWWAuthError.js';\nimport { httpRequest } from '../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\nimport { isAccessToken, isIDToken } from './types/Token.js';\n\nasync function getUserInfo(sdk, accessTokenObject, idTokenObject) {\n    if (!accessTokenObject) {\n        accessTokenObject = (await sdk.tokenManager.getTokens()).accessToken;\n    }\n    if (!idTokenObject) {\n        idTokenObject = (await sdk.tokenManager.getTokens()).idToken;\n    }\n    if (!accessTokenObject || !isAccessToken(accessTokenObject)) {\n        return Promise.reject(new AuthSdkError('getUserInfo requires an access token object'));\n    }\n    if (!idTokenObject || !isIDToken(idTokenObject)) {\n        return Promise.reject(new AuthSdkError('getUserInfo requires an ID token object'));\n    }\n    const options = {\n        url: accessTokenObject.userinfoUrl,\n        method: 'GET',\n        accessToken: accessTokenObject.accessToken\n    };\n    if (sdk.options.dpop) {\n        const headers = await sdk.getDPoPAuthorizationHeaders(Object.assign(Object.assign({}, options), { accessToken: accessTokenObject }));\n        options.headers = headers;\n        delete options.accessToken;\n    }\n    return httpRequest(sdk, options)\n        .then(userInfo => {\n        if (userInfo.sub === idTokenObject.claims.sub) {\n            return userInfo;\n        }\n        return Promise.reject(new AuthSdkError('getUserInfo request was rejected due to token mismatch'));\n    })\n        .catch(function (err) {\n        var _a;\n        if (err instanceof WWWAuthError && !sdk.options.dpop) {\n            const { error, errorDescription } = err;\n            throw new OAuthError(error, errorDescription);\n        }\n        if (!sdk.options.dpop) {\n            let e = err;\n            if (err instanceof AuthApiError && ((_a = err === null || err === void 0 ? void 0 : err.meta) === null || _a === void 0 ? void 0 : _a.wwwAuthHeader)) {\n                e = WWWAuthError.parseHeader(err.meta.wwwAuthHeader);\n            }\n            if (e instanceof WWWAuthError) {\n                const { error, errorDescription } = e;\n                throw new OAuthError(error, errorDescription);\n            }\n        }\n        throw err;\n    });\n}\n\nexport { getUserInfo };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}