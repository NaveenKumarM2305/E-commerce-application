{"ast":null,"code":"/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { find, omit } from '../../util/object.js';\nimport { toQueryString } from '../../util/url.js';\nimport AuthSdkError from '../../errors/AuthSdkError.js';\nimport '../../errors/WWWAuthError.js';\nimport { get } from '../../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\nimport { postToTransaction } from '../api.js';\nimport { addStateToken } from './stateToken.js';\nfunction link2fn(sdk, tx, res, obj, link, ref) {\n  if (Array.isArray(link)) {\n    return function (name, opts) {\n      if (!name) {\n        throw new AuthSdkError('Must provide a link name');\n      }\n      var lk = find(link, {\n        name: name\n      });\n      if (!lk) {\n        throw new AuthSdkError('No link found for that name');\n      }\n      return link2fn(sdk, tx, res, obj, lk, ref)(opts);\n    };\n  } else if (link.hints && link.hints.allow && link.hints.allow.length === 1) {\n    var method = link.hints.allow[0];\n    switch (method) {\n      case 'GET':\n        return function () {\n          return get(sdk, link.href, {\n            withCredentials: true\n          });\n        };\n      case 'POST':\n        return function (opts) {\n          if (ref && ref.isPolling) {\n            ref.isPolling = false;\n          }\n          var data = addStateToken(res, opts);\n          if (res.status === 'MFA_ENROLL' || res.status === 'FACTOR_ENROLL') {\n            Object.assign(data, {\n              factorType: obj.factorType,\n              provider: obj.provider\n            });\n          }\n          var params = {};\n          var autoPush = data.autoPush;\n          if (autoPush !== undefined) {\n            if (typeof autoPush === 'function') {\n              try {\n                params.autoPush = !!autoPush();\n              } catch (e) {\n                return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n              }\n            } else if (autoPush !== null) {\n              params.autoPush = !!autoPush;\n            }\n            data = omit(data, 'autoPush');\n          }\n          var rememberDevice = data.rememberDevice;\n          if (rememberDevice !== undefined) {\n            if (typeof rememberDevice === 'function') {\n              try {\n                params.rememberDevice = !!rememberDevice();\n              } catch (e) {\n                return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n              }\n            } else if (rememberDevice !== null) {\n              params.rememberDevice = !!rememberDevice;\n            }\n            data = omit(data, 'rememberDevice');\n          } else if (data.profile && data.profile.updatePhone !== undefined) {\n            if (data.profile.updatePhone) {\n              params.updatePhone = true;\n            }\n            data.profile = omit(data.profile, 'updatePhone');\n          }\n          var href = link.href + toQueryString(params);\n          return postToTransaction(sdk, tx, href, data);\n        };\n    }\n  }\n}\nexport { link2fn };","map":{"version":3,"names":["find","omit","toQueryString","AuthSdkError","get","postToTransaction","addStateToken","link2fn","sdk","tx","res","obj","link","ref","Array","isArray","name","opts","lk","hints","allow","length","method","href","withCredentials","isPolling","data","status","Object","assign","factorType","provider","params","autoPush","undefined","e","Promise","reject","rememberDevice","profile","updatePhone"],"sources":["C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/authn/util/link2fn.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { find, omit } from '../../util/object.js';\nimport { toQueryString } from '../../util/url.js';\nimport AuthSdkError from '../../errors/AuthSdkError.js';\nimport '../../errors/WWWAuthError.js';\nimport { get } from '../../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\nimport { postToTransaction } from '../api.js';\nimport { addStateToken } from './stateToken.js';\n\nfunction link2fn(sdk, tx, res, obj, link, ref) {\n    if (Array.isArray(link)) {\n        return function (name, opts) {\n            if (!name) {\n                throw new AuthSdkError('Must provide a link name');\n            }\n            var lk = find(link, { name: name });\n            if (!lk) {\n                throw new AuthSdkError('No link found for that name');\n            }\n            return link2fn(sdk, tx, res, obj, lk, ref)(opts);\n        };\n    }\n    else if (link.hints &&\n        link.hints.allow &&\n        link.hints.allow.length === 1) {\n        var method = link.hints.allow[0];\n        switch (method) {\n            case 'GET':\n                return function () {\n                    return get(sdk, link.href, { withCredentials: true });\n                };\n            case 'POST':\n                return function (opts) {\n                    if (ref && ref.isPolling) {\n                        ref.isPolling = false;\n                    }\n                    var data = addStateToken(res, opts);\n                    if (res.status === 'MFA_ENROLL' || res.status === 'FACTOR_ENROLL') {\n                        Object.assign(data, {\n                            factorType: obj.factorType,\n                            provider: obj.provider\n                        });\n                    }\n                    var params = {};\n                    var autoPush = data.autoPush;\n                    if (autoPush !== undefined) {\n                        if (typeof autoPush === 'function') {\n                            try {\n                                params.autoPush = !!autoPush();\n                            }\n                            catch (e) {\n                                return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n                            }\n                        }\n                        else if (autoPush !== null) {\n                            params.autoPush = !!autoPush;\n                        }\n                        data = omit(data, 'autoPush');\n                    }\n                    var rememberDevice = data.rememberDevice;\n                    if (rememberDevice !== undefined) {\n                        if (typeof rememberDevice === 'function') {\n                            try {\n                                params.rememberDevice = !!rememberDevice();\n                            }\n                            catch (e) {\n                                return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n                            }\n                        }\n                        else if (rememberDevice !== null) {\n                            params.rememberDevice = !!rememberDevice;\n                        }\n                        data = omit(data, 'rememberDevice');\n                    }\n                    else if (data.profile &&\n                        data.profile.updatePhone !== undefined) {\n                        if (data.profile.updatePhone) {\n                            params.updatePhone = true;\n                        }\n                        data.profile = omit(data.profile, 'updatePhone');\n                    }\n                    var href = link.href + toQueryString(params);\n                    return postToTransaction(sdk, tx, href, data);\n                };\n        }\n    }\n}\n\nexport { link2fn };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}