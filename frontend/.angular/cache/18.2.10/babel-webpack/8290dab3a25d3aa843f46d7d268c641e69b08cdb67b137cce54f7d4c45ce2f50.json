{"ast":null,"code":"import _asyncToGenerator from \"C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthApiError from '../../errors/AuthApiError.js';\nimport AuthSdkError from '../../errors/AuthSdkError.js';\nimport '../../errors/WWWAuthError.js';\nimport { removeNils } from '../../util/object.js';\nimport { toQueryString } from '../../util/url.js';\nimport { httpRequest } from '../../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\nimport { generateDPoPForTokenRequest, isDPoPNonceError } from '../dpop.js';\nfunction validateOptions(options) {\n  if (!options.clientId) {\n    throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n  }\n  if (!options.redirectUri) {\n    throw new AuthSdkError('The redirectUri passed to /authorize must also be passed to /token');\n  }\n  if (!options.authorizationCode && !options.interactionCode) {\n    throw new AuthSdkError('An authorization code (returned from /authorize) must be passed to /token');\n  }\n  if (!options.codeVerifier) {\n    throw new AuthSdkError('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n  }\n}\nfunction getPostData(sdk, options) {\n  var params = removeNils({\n    'client_id': options.clientId,\n    'redirect_uri': options.redirectUri,\n    'grant_type': options.interactionCode ? 'interaction_code' : 'authorization_code',\n    'code_verifier': options.codeVerifier\n  });\n  if (options.interactionCode) {\n    params['interaction_code'] = options.interactionCode;\n  } else if (options.authorizationCode) {\n    params.code = options.authorizationCode;\n  }\n  const {\n    clientSecret\n  } = sdk.options;\n  if (clientSecret) {\n    params['client_secret'] = clientSecret;\n  }\n  return toQueryString(params).slice(1);\n}\nfunction makeTokenRequest(_x, _x2) {\n  return _makeTokenRequest.apply(this, arguments);\n}\nfunction _makeTokenRequest() {\n  _makeTokenRequest = _asyncToGenerator(function* (sdk, {\n    url,\n    data,\n    nonce,\n    dpopKeyPair\n  }) {\n    var _a, _b;\n    const method = 'POST';\n    const headers = {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    };\n    if (sdk.options.dpop) {\n      if (!dpopKeyPair) {\n        throw new AuthSdkError('DPoP is configured but no key pair was provided');\n      }\n      const proof = yield generateDPoPForTokenRequest({\n        url,\n        method,\n        nonce,\n        keyPair: dpopKeyPair\n      });\n      headers.DPoP = proof;\n    }\n    try {\n      const resp = yield httpRequest(sdk, {\n        url,\n        method,\n        args: data,\n        headers\n      });\n      return resp;\n    } catch (err) {\n      if (isDPoPNonceError(err) && !nonce) {\n        const dpopNonce = (_a = err.resp) === null || _a === void 0 ? void 0 : _a.headers['dpop-nonce'];\n        if (!dpopNonce) {\n          throw new AuthApiError({\n            errorSummary: 'No `dpop-nonce` header found when required'\n          }, (_b = err.resp) !== null && _b !== void 0 ? _b : undefined);\n        }\n        return makeTokenRequest(sdk, {\n          url,\n          data,\n          dpopKeyPair,\n          nonce: dpopNonce\n        });\n      }\n      throw err;\n    }\n  });\n  return _makeTokenRequest.apply(this, arguments);\n}\nfunction postToTokenEndpoint(_x3, _x4, _x5) {\n  return _postToTokenEndpoint.apply(this, arguments);\n}\nfunction _postToTokenEndpoint() {\n  _postToTokenEndpoint = _asyncToGenerator(function* (sdk, options, urls) {\n    validateOptions(options);\n    var data = getPostData(sdk, options);\n    const params = {\n      url: urls.tokenUrl,\n      data,\n      dpopKeyPair: options === null || options === void 0 ? void 0 : options.dpopKeyPair\n    };\n    return makeTokenRequest(sdk, params);\n  });\n  return _postToTokenEndpoint.apply(this, arguments);\n}\nfunction postRefreshToken(_x6, _x7, _x8) {\n  return _postRefreshToken.apply(this, arguments);\n}\nfunction _postRefreshToken() {\n  _postRefreshToken = _asyncToGenerator(function* (sdk, options, refreshToken) {\n    const data = Object.entries({\n      client_id: options.clientId,\n      grant_type: 'refresh_token',\n      scope: refreshToken.scopes.join(' '),\n      refresh_token: refreshToken.refreshToken\n    }).map(function ([name, value]) {\n      return name + '=' + encodeURIComponent(value);\n    }).join('&');\n    let url = refreshToken.tokenUrl;\n    if (options.extraParams && Object.keys(options.extraParams).length >= 1) {\n      url += toQueryString(options.extraParams);\n    }\n    const params = {\n      url,\n      data,\n      dpopKeyPair: options === null || options === void 0 ? void 0 : options.dpopKeyPair\n    };\n    return makeTokenRequest(sdk, params);\n  });\n  return _postRefreshToken.apply(this, arguments);\n}\nexport { postRefreshToken, postToTokenEndpoint };","map":{"version":3,"names":["AuthApiError","AuthSdkError","removeNils","toQueryString","httpRequest","generateDPoPForTokenRequest","isDPoPNonceError","validateOptions","options","clientId","redirectUri","authorizationCode","interactionCode","codeVerifier","getPostData","sdk","params","code","clientSecret","slice","makeTokenRequest","_x","_x2","_makeTokenRequest","apply","arguments","_asyncToGenerator","url","data","nonce","dpopKeyPair","_a","_b","method","headers","dpop","proof","keyPair","DPoP","resp","args","err","dpopNonce","errorSummary","undefined","postToTokenEndpoint","_x3","_x4","_x5","_postToTokenEndpoint","urls","tokenUrl","postRefreshToken","_x6","_x7","_x8","_postRefreshToken","refreshToken","Object","entries","client_id","grant_type","scope","scopes","join","refresh_token","map","name","value","encodeURIComponent","extraParams","keys","length"],"sources":["C:/SpringBOot/ecommerce-project/03-frontend/angular-ecommerce/node_modules/@okta/okta-auth-js/esm/browser/oidc/endpoints/token.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport AuthApiError from '../../errors/AuthApiError.js';\nimport AuthSdkError from '../../errors/AuthSdkError.js';\nimport '../../errors/WWWAuthError.js';\nimport { removeNils } from '../../util/object.js';\nimport { toQueryString } from '../../util/url.js';\nimport { httpRequest } from '../../http/request.js';\nimport 'tiny-emitter';\nimport 'js-cookie';\nimport 'cross-fetch';\nimport { generateDPoPForTokenRequest, isDPoPNonceError } from '../dpop.js';\n\nfunction validateOptions(options) {\n    if (!options.clientId) {\n        throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n    }\n    if (!options.redirectUri) {\n        throw new AuthSdkError('The redirectUri passed to /authorize must also be passed to /token');\n    }\n    if (!options.authorizationCode && !options.interactionCode) {\n        throw new AuthSdkError('An authorization code (returned from /authorize) must be passed to /token');\n    }\n    if (!options.codeVerifier) {\n        throw new AuthSdkError('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n    }\n}\nfunction getPostData(sdk, options) {\n    var params = removeNils({\n        'client_id': options.clientId,\n        'redirect_uri': options.redirectUri,\n        'grant_type': options.interactionCode ? 'interaction_code' : 'authorization_code',\n        'code_verifier': options.codeVerifier\n    });\n    if (options.interactionCode) {\n        params['interaction_code'] = options.interactionCode;\n    }\n    else if (options.authorizationCode) {\n        params.code = options.authorizationCode;\n    }\n    const { clientSecret } = sdk.options;\n    if (clientSecret) {\n        params['client_secret'] = clientSecret;\n    }\n    return toQueryString(params).slice(1);\n}\nasync function makeTokenRequest(sdk, { url, data, nonce, dpopKeyPair }) {\n    var _a, _b;\n    const method = 'POST';\n    const headers = {\n        'Content-Type': 'application/x-www-form-urlencoded',\n    };\n    if (sdk.options.dpop) {\n        if (!dpopKeyPair) {\n            throw new AuthSdkError('DPoP is configured but no key pair was provided');\n        }\n        const proof = await generateDPoPForTokenRequest({ url, method, nonce, keyPair: dpopKeyPair });\n        headers.DPoP = proof;\n    }\n    try {\n        const resp = await httpRequest(sdk, {\n            url,\n            method,\n            args: data,\n            headers\n        });\n        return resp;\n    }\n    catch (err) {\n        if (isDPoPNonceError(err) && !nonce) {\n            const dpopNonce = (_a = err.resp) === null || _a === void 0 ? void 0 : _a.headers['dpop-nonce'];\n            if (!dpopNonce) {\n                throw new AuthApiError({ errorSummary: 'No `dpop-nonce` header found when required' }, (_b = err.resp) !== null && _b !== void 0 ? _b : undefined\n                );\n            }\n            return makeTokenRequest(sdk, { url, data, dpopKeyPair, nonce: dpopNonce });\n        }\n        throw err;\n    }\n}\nasync function postToTokenEndpoint(sdk, options, urls) {\n    validateOptions(options);\n    var data = getPostData(sdk, options);\n    const params = {\n        url: urls.tokenUrl,\n        data,\n        dpopKeyPair: options === null || options === void 0 ? void 0 : options.dpopKeyPair\n    };\n    return makeTokenRequest(sdk, params);\n}\nasync function postRefreshToken(sdk, options, refreshToken) {\n    const data = Object.entries({\n        client_id: options.clientId,\n        grant_type: 'refresh_token',\n        scope: refreshToken.scopes.join(' '),\n        refresh_token: refreshToken.refreshToken,\n    }).map(function ([name, value]) {\n        return name + '=' + encodeURIComponent(value);\n    }).join('&');\n    let url = refreshToken.tokenUrl;\n    if (options.extraParams && Object.keys(options.extraParams).length >= 1) {\n        url += toQueryString(options.extraParams);\n    }\n    const params = {\n        url,\n        data,\n        dpopKeyPair: options === null || options === void 0 ? void 0 : options.dpopKeyPair\n    };\n    return makeTokenRequest(sdk, params);\n}\n\nexport { postRefreshToken, postToTokenEndpoint };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}